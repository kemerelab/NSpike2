
samprate = 1500;
passband = [100 350];

passbandAtten = 0.05;
stopbandAtten = 40;

order = 5;

[b,a] = ellip(order,passbandAtten,stopbandAtten,passband/(samprate/2));

N = length(b);

filename = 'filtercoeffs.h';

fid = fopen(filename,'w');

fprintf(fid,'#define NFILT %d\n\n',N);

fprintf(fid,'double fNumerator[NFILT] = {\n');
for i = 1:N-1
  fprintf(fid,'  %25.18e,\n', b(i));
end
fprintf(fid,'  %25.18e};\n\n\n', b(N));

fprintf(fid,'double fDenominator[NFILT] = {\n');
for i = 1:N-1
  fprintf(fid,'  %25.18e,\n', a(i));
end
fprintf(fid,'  %25.18e};\n\n\n', a(N));
fclose(fid);

save ellipfilter b a;

fid = fopen('tempa.txt','w');
fprintf(fid,'  %12.6e\n', a);
fclose(fid);
fid = fopen('tempb.txt','w');
fprintf(fid,'  %12.6e\n', b);
fclose(fid);
